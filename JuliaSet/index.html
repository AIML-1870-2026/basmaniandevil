<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Julia Set Explorer</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/controls.css">
</head>
<body>
  <header class="app-header">
    <div class="header-content">
      <div class="header-text">
        <h1>Julia Set Explorer</h1>
        <p class="tagline">Explore the infinite beauty of fractal mathematics</p>
      </div>
      <button id="helpBtn" class="icon-btn" aria-label="Help" title="Help &amp; Info">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
          <circle cx="10" cy="10" r="9" stroke="currentColor" stroke-width="1.5"/>
          <text x="10" y="14.5" text-anchor="middle" fill="currentColor" font-size="12" font-weight="600">?</text>
        </svg>
      </button>
    </div>
  </header>

  <main class="app-main">
    <div class="canvas-container" id="canvasContainer">
      <canvas id="fractalCanvas"></canvas>
      <div class="canvas-overlay" id="canvasOverlay"></div>
      <div class="zoom-indicator" id="zoomIndicator"></div>
    </div>

    <aside class="control-panel" id="controlPanel">
      <!-- Navigation Section -->
      <section class="control-section" id="navSection">
        <button class="section-header" aria-expanded="true" aria-controls="navContent">
          <span class="section-title">Navigation</span>
          <span class="chevron">&#9660;</span>
        </button>
        <div class="section-content" id="navContent">
          <div class="button-group">
            <button id="zoomInBtn" class="ctrl-btn" title="Zoom In">
              <svg width="18" height="18" viewBox="0 0 18 18"><line x1="9" y1="4" x2="9" y2="14" stroke="currentColor" stroke-width="2"/><line x1="4" y1="9" x2="14" y2="9" stroke="currentColor" stroke-width="2"/></svg>
              Zoom In
            </button>
            <button id="zoomOutBtn" class="ctrl-btn" title="Zoom Out">
              <svg width="18" height="18" viewBox="0 0 18 18"><line x1="4" y1="9" x2="14" y2="9" stroke="currentColor" stroke-width="2"/></svg>
              Zoom Out
            </button>
            <button id="resetViewBtn" class="ctrl-btn" title="Reset View">
              <svg width="18" height="18" viewBox="0 0 18 18"><path d="M3 9a6 6 0 1 1 1.5 4" stroke="currentColor" stroke-width="1.5" fill="none"/><path d="M1 7l2.5 2.5L6 7" stroke="currentColor" stroke-width="1.5" fill="none"/></svg>
              Reset
            </button>
          </div>
          <div class="info-row">
            <span class="info-label">Zoom:</span>
            <span class="info-value" id="zoomLevel">1.0x</span>
          </div>
        </div>
      </section>

      <!-- Parameters Section -->
      <section class="control-section" id="paramSection">
        <button class="section-header" aria-expanded="true" aria-controls="paramContent">
          <span class="section-title">Parameters</span>
          <span class="chevron">&#9660;</span>
        </button>
        <div class="section-content" id="paramContent">
          <div class="param-display" id="paramDisplay">c = -0.70 + 0.27i</div>
          <div class="slider-group">
            <label for="realSlider">Real(c)</label>
            <div class="slider-row">
              <input type="range" id="realSlider" min="-2" max="2" step="0.01" value="-0.7" aria-label="Real component of c">
              <input type="number" id="realInput" min="-2" max="2" step="0.01" value="-0.7" class="num-input" aria-label="Real component value">
            </div>
          </div>
          <div class="slider-group">
            <label for="imagSlider">Imaginary(c)</label>
            <div class="slider-row">
              <input type="range" id="imagSlider" min="-2" max="2" step="0.01" value="0.27" aria-label="Imaginary component of c">
              <input type="number" id="imagInput" min="-2" max="2" step="0.01" value="0.27" class="num-input" aria-label="Imaginary component value">
            </div>
          </div>
        </div>
      </section>

      <!-- Presets Section -->
      <section class="control-section" id="presetSection">
        <button class="section-header" aria-expanded="true" aria-controls="presetContent">
          <span class="section-title">Presets</span>
          <span class="chevron">&#9660;</span>
        </button>
        <div class="section-content" id="presetContent">
          <div class="preset-grid" id="presetGrid">
            <!-- Populated by JS -->
          </div>
        </div>
      </section>

      <!-- Appearance Section -->
      <section class="control-section" id="appearanceSection">
        <button class="section-header" aria-expanded="true" aria-controls="appearanceContent">
          <span class="section-title">Appearance</span>
          <span class="chevron">&#9660;</span>
        </button>
        <div class="section-content" id="appearanceContent">
          <div class="color-picker" id="colorPicker">
            <!-- Populated by JS -->
          </div>
          <div class="slider-group">
            <label for="iterSlider">Max Iterations</label>
            <div class="slider-row">
              <input type="range" id="iterSlider" min="50" max="500" step="10" value="200" aria-label="Maximum iterations">
              <span class="slider-value" id="iterValue">200</span>
            </div>
          </div>
        </div>
      </section>

      <!-- Animation Section -->
      <section class="control-section" id="animSection">
        <button class="section-header" aria-expanded="true" aria-controls="animContent">
          <span class="section-title">Animation</span>
          <span class="chevron">&#9660;</span>
        </button>
        <div class="section-content" id="animContent">
          <div class="button-group">
            <button id="playPauseBtn" class="ctrl-btn play-btn" title="Play Animation">
              <svg width="18" height="18" viewBox="0 0 18 18" id="playIcon"><polygon points="5,3 15,9 5,15" fill="currentColor"/></svg>
              <svg width="18" height="18" viewBox="0 0 18 18" id="pauseIcon" style="display:none"><rect x="4" y="3" width="3.5" height="12" fill="currentColor"/><rect x="10.5" y="3" width="3.5" height="12" fill="currentColor"/></svg>
              <span id="playPauseLabel">Play</span>
            </button>
          </div>
          <div class="slider-group">
            <label for="speedSlider">Speed</label>
            <div class="slider-row">
              <input type="range" id="speedSlider" min="0.5" max="2" step="0.1" value="1" aria-label="Animation speed">
              <span class="slider-value" id="speedValue">1.0x</span>
            </div>
          </div>
          <div class="slider-group">
            <label for="durationSlider">Cycle Duration</label>
            <div class="slider-row">
              <input type="range" id="durationSlider" min="5" max="30" step="1" value="10" aria-label="Animation cycle duration">
              <span class="slider-value" id="durationValue">10s</span>
            </div>
          </div>
          <div class="anim-path-group">
            <label>Path</label>
            <div class="path-buttons">
              <button class="path-btn active" data-path="circular" title="Circular path">Circular</button>
              <button class="path-btn" data-path="figure8" title="Figure-8 path">Figure-8</button>
            </div>
          </div>
          <div class="progress-bar-container">
            <div class="progress-bar" id="animProgress"></div>
          </div>
        </div>
      </section>
    </aside>
  </main>

  <footer class="app-footer">
    <div class="footer-content">
      <span class="perf-indicator">Render: <span id="renderTime">0</span>ms</span>
      <span class="footer-credit">Julia Set Explorer</span>
    </div>
  </footer>

  <!-- Help Modal -->
  <div class="modal-overlay" id="helpModal">
    <div class="modal" role="dialog" aria-labelledby="modalTitle">
      <div class="modal-header">
        <h2 id="modalTitle">About Julia Sets</h2>
        <button class="modal-close" id="modalClose" aria-label="Close">&times;</button>
      </div>
      <div class="modal-body">
        <p>A <strong>Julia set</strong> is a fractal defined by iterating the function:</p>
        <p class="math">z<sub>n+1</sub> = z<sub>n</sub><sup>2</sup> + c</p>
        <p>For each pixel, we start with z<sub>0</sub> equal to the pixel's coordinates in the complex plane, and iterate repeatedly. If the value escapes to infinity (|z| &gt; 2), the point is <em>outside</em> the set, and is colored based on how many iterations it took to escape.</p>
        <p>Points that never escape are <em>inside</em> the Julia set and are colored black.</p>
        <h3>Controls</h3>
        <ul>
          <li><strong>Click</strong> on the canvas to zoom into that point</li>
          <li><strong>Click &amp; drag</strong> to pan around the complex plane</li>
          <li>Use <strong>sliders</strong> to adjust the complex parameter c</li>
          <li>Try different <strong>presets</strong> to explore interesting Julia sets</li>
          <li>Change <strong>color schemes</strong> and <strong>max iterations</strong> for different visual effects</li>
          <li>Use <strong>animation</strong> to watch the Julia set morph as c moves along a path</li>
        </ul>
      </div>
    </div>
  </div>

  <script src="js/colors.js"></script>
  <script src="js/presets.js"></script>
  <script src="js/renderer.js"></script>
  <script src="js/controls.js"></script>
  <script src="js/animator.js"></script>
  <script src="js/main.js"></script>
</body>
</html>
